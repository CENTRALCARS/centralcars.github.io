<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur d'Annonces Central Cars</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter for consistency with index.html -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif; /* Applied Inter font */
        }
        /* Custom scrollbar for consistency */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* Message box for copy confirmation */
        .copy-message {
            @apply fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-xl shadow-lg transition-transform transform translate-y-full opacity-0;
        }
        .copy-message.show {
            @apply translate-y-0 opacity-100;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header (Consistent with index.html) -->
    <header id="header" class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-gray-900">
                <i class="fas fa-car-side text-red-600"></i> CENTRAL <span class="text-red-600">CARS</span>
            </a>
            <div class="hidden md:flex space-x-8 items-center relative">
                <a href="index.html#accueil" class="text-gray-600 hover:text-red-600 transition duration-300">Accueil</a>
                <a href="index.html#vehicules" class="text-gray-600 hover:text-red-600 transition duration-300">Nos Véhicules</a>
                <a href="index.html#services" class="text-gray-600 hover:text-red-600 transition duration-300">Nos Services</a>
                <a href="index.html#contact" class="text-gray-600 hover:text-red-600 transition duration-300">Contact</a>
            </div>
            <div class="md:hidden flex items-center space-x-4 relative">
                <button id="mobile-menu-button" class="text-gray-600 hover:text-red-600 focus:outline-none">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu (Consistent with index.html) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white">
            <a href="index.html#accueil" class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Accueil</a>
            <a href="index.html#vehicules" class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Nos Véhicules</a>
            <a href="index.html#services" class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Nos Services</a>
            <a href="index.html#contact" class="block py-2 px-4 text-sm text-gray-600 hover:bg-gray-100">Contact</a>
        </div>
    </header>

    <div class="container mx-auto mt-8 mb-8 p-6 sm:p-8 rounded-lg shadow-lg bg-white max-w-4xl">
        <h1 class="text-4xl font-bold text-center mb-8 text-gray-900">
            <i class="fas fa-bullhorn mr-3 text-red-600"></i> Générateur d'annonces LeBonCoin
        </h1>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Colonne de gauche : Formulaire -->
            <div class="space-y-4">
                <div>
                    <label for="titre" class="block text-gray-700 font-semibold mb-2">Titre de l'annonce</label>
                    <input type="text" id="titre" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Ex: Peugeot 208 1.2 PureTech 82ch Allure">
                </div>
                <div>
                    <label for="marque" class="block text-gray-700 font-semibold mb-2">Marque</label>
                    <select id="marque" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        <option value="">Sélectionner une marque</option>
                        <!-- Options will be populated by JS -->
                    </select>
                </div>
                <div>
                    <label for="modele" class="block text-gray-700 font-semibold mb-2">Modèle</label>
                    <select id="modele" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        <option value="">Sélectionner un modèle</option>
                        <!-- Options will be populated by JS -->
                    </select>
                </div>
                <div>
                    <label for="dateCirculation" class="block text-gray-700 font-semibold mb-2">Date de première mise en circulation (MM/AAAA)</label>
                    <input type="text" id="dateCirculation" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Ex: 03/2018" pattern="(0[1-9]|1[0-2])\/(19|20)\d{2}">
                </div>
                <div>
                    <label for="kilometrage" class="block text-gray-700 font-semibold mb-2">Kilométrage</label>
                    <input type="number" id="kilometrage" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Ex: 75000">
                </div>
                <div>
                    <label for="carburant" class="block text-gray-700 font-semibold mb-2">Carburant</label>
                    <select id="carburant" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        <option value="">Sélectionner un type de carburant</option>
                    </select>
                </div>
                <div>
                    <label for="boiteVitesse" class="block text-gray-700 font-semibold mb-2">Boîte de vitesse</label>
                    <select id="boiteVitesse" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        <option value="">Sélectionner un type de boîte</option>
                    </select>
                </div>
        
                <div>
                    <label for="critAir" class="block text-gray-700 font-semibold mb-2">Crit'Air</label>
                    <select id="critAir" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        <option value="">Sélectionner une vignette</option>
                    </select>
                </div>
                <div>
                    <label for="description" class="block text-gray-700 font-semibold mb-2">Description / Commentaires</label>
                    <textarea id="description" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-y" rows="4" placeholder="Ajoutez des détails supplémentaires sur le véhicule..."></textarea>
                </div>
                <div>
                    <label for="equivalent" class="block text-gray-700 font-semibold mb-2">Équivalent (optionnel)</label>
                    <input type="text" id="equivalent" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Ex: Clio, C3, Polo">
                </div>

                <!-- Prix moved up -->
                <div class="mt-6">
                    <label for="prix" class="block text-gray-700 font-semibold mb-2">Prix (€)</label>
                    <input type="number" id="prix" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" step="0.01" placeholder="Ex: 12500">
                </div>

                <div class="mt-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">Options / Équipements</h3>
                    <!-- Manual Option Input -->
                    <div class="flex gap-2 mb-4">
                        <input type="text" id="manualOptionInput" class="flex-grow px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Ajouter une option manuellement">
                        <button id="addManualOptionButton" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-300">Ajouter</button>
                    </div>
                    <div id="optionsCheckboxes" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                        <!-- Checkboxes will be generated here -->
                    </div>
                </div>

                <div class="mt-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">Entretiens effectués</h3>
                    <div id="maintenancesCheckboxes" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                        <!-- Checkboxes will be generated here -->
                    </div>
                </div>

                <button id="generateAdButton" class="w-full bg-red-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-red-700 transition duration-300 shadow-lg mt-6">Générer l'annonce</button>
            </div>

            <!-- Colonne de droite : Aperçu de l'annonce -->
            <div>
                <label for="adOutput" class="block text-gray-700 font-semibold mb-2">Aperçu de l'annonce</label>
                <textarea id="adOutput" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-y h-96" readonly></textarea>
                <button id="copyAdButton" class="w-full bg-gray-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-700 transition duration-300 mt-4">Copier l'annonce</button>
                <div id="copyMessage" class="copy-message hidden">Copié !</div>
            </div>
        </div>
    </div>

    <!-- Footer (Consistent with index.html) -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2024 CENTRAL CARS. Tous droits réservés.</p>
            <p class="text-sm text-gray-400 mt-2">Site conçu avec ❤️</p>
        </div>
    </footer>

    <script>
        // JavaScript for Hamburger Menu Toggle (Consistent with index.html)
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuButton && mobileMenu) {
            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
        }

        // Data for dropdowns and checkboxes
        const carData = {
            "Renault": ["Clio", "Mégane", "Captur", "Kadjar", "Austral", "Arkana", "Twingo", "Zoe", "Scénic", "Talisman", "Espace", "Koleos", "Kangoo"],
            "Peugeot": ["206", "207", "208", "306", "307", "308", "2008", "3008", "5008", "508","107", "108", "Rifter", "Partner", "Traveller", "Expert"],
            "Citroën": ["C3", "C4", "C5 Aircross", "C3 Aircross", "Berlingo", "C1", "C4 Cactus", "C5 X", "Jumpy", "Spacetourer"],
            "Volkswagen": ["Golf", "Polo", "Tiguan", "Passat", "T-Roc", "Arteon", "Up!", "ID.3", "ID.4", "ID.5", "ID.Buzz", "Touran", "Touareg", "Caddy"],
            "Audi": ["A1", "A3", "A4", "A5", "A6", "A7", "A8", "Q2", "Q3", "Q4 e-tron", "Q5", "Q7", "Q8", "e-tron", "TT", "R8"],
            "BMW": ["Série 1", "Série 2", "Série 3", "Série 4", "Série 5", "Série 6", "Série 7", "Série 8", "X1", "X2", "X3", "X4", "X5", "X6", "X7", "Z4", "i3", "i4", "iX", "iX3", "i5", "i7"],
            "Mercedes-Benz": ["Classe A", "Classe B", "Classe C", "Classe E", "Classe S", "CLA", "CLS", "GLA", "GLC", "GLE", "GLS", "EQA", "EQB", "EQC", "EQE", "EQS", "AMG GT", "Citan", "Vito", "Sprinter"],
            "Ford": ["Fiesta", "Focus", "Puma", "Kuga", "Mustang Mach-E", "Explorer", "Edge", "Mondeo", "Galaxy", "S-Max", "Ranger", "Transit Custom", "Tourneo Custom"],
            "Toyota": ["Yaris", "Corolla", "C-HR", "RAV4", "Aygo", "Mirai", "Camry", "Prius", "Highlander", "Land Cruiser", "Hilux", "Proace"],
            "Nissan": ["Qashqai", "Juke", "X-Trail", "Micra", "Leaf", "Ariya", "Navara", "Townstar"],
            "Hyundai": ["i10", "i20", "i30", "Kona", "Tucson", "Santa Fe", "Bayon", "Ioniq 5", "Ioniq 6", "Nexo"],
            "Kia": ["Picanto", "Rio", "Ceed", "Sportage", "Niro", "EV6", "Stonic", "Xceed", "Sorento", "Soul EV"],
            "Opel": ["Corsa", "Astra", "Mokka", "Grandland", "Crossland", "Combo Life", "Zafira Life", "Vivaro"],
            "Skoda": ["Fabia", "Octavia", "Superb", "Kamiq", "Karoq", "Kodiaq", "Enyaq iV", "Scala"],
            "Seat": ["Ibiza", "Leon", "Ateca", "Arona", "Tarraco", "Toledo", "Alhambra"],
            "Fiat": ["500", "Panda", "Tipo", "500X", "500e", "Ducato", "Talento"],
            "Volvo": ["S60", "V60", "S90", "V90", "XC40", "XC60", "XC90", "C40 Recharge", "EX30", "EX90"],
            "Tesla": ["Model 3", "Model Y", "Model S", "Model X", "Cybertruck"],
            "Dacia": ["Sandero", "Duster", "Spring", "Jogger", "Lodgy", "Logan"],
            "Mazda": ["Mazda2", "Mazda3", "Mazda6", "CX-30", "CX-5", "CX-60", "CX-80", "MX-30", "MX-5"],
            "Honda": ["Civic", "CR-V", "Jazz", "HR-V", "e", "ZR-V"],
            "Suzuki": ["Swift", "Vitara", "Ignis", "S-Cross", "Jimny", "Across"],
            "Jeep": ["Renegade", "Compass", "Wrangler", "Grand Cherokee", "Avenger"],
            "Land Rover": ["Range Rover Evoque", "Discovery Sport", "Defender", "Range Rover Sport", "Discovery", "Range Rover"],
            "Porsche": ["911", "Cayenne", "Macan", "Panamera", "Taycan", "718 Boxster", "718 Cayman"],
            "Alfa Romeo": ["Giulia", "Stelvio", "Tonale"],
            "Lexus": ["IS", "ES", "LS", "RC", "LC", "UX", "NX", "RX", "RZ"],
            "Mini": ["Mini 3 Portes", "Mini 5 Portes", "Countryman", "Clubman", "Cabrio", "Aceman"],
            "Cupra": ["Formentor", "Born", "Leon", "Ateca", "Tavascan"],
            "Polestar": ["Polestar 2", "Polestar 3", "Polestar 4"],
            "MG": ["ZS EV", "MG4 EV", "HS", "MG5 EV", "Cyberster"]
        };

        const carburants = ["Essence", "Diesel", "Électrique", "Hybride", "Hybride Rechargeable", "GPL", "E85"];
        const boiteVitesse = ["Manuelle", "Automatique"];
        const critAirOptions = ["0 (Vert)", "1", "2", "3", "4", "5", "Non classé"];

        const vehicleOptionsData = {
            "Sécurité": [
                "ABS", "ESP", "Airbags frontaux", "Airbags latéraux", "Airbags rideaux",
                "Aide au freinage d'urgence", "Contrôle de la pression des pneus",
                "Fixations ISOFIX", "Détecteur d'angle mort", "Alerte de franchissement de ligne",
                "Régulateur de vitesse adaptatif", "Caméra de recul", "Radars de stationnement avant",
                "Radars de stationnement arrière", "Phares LED", "Feux de jour LED",
                "Système de surveillance de la vigilance du conducteur", "Freinage automatique d'urgence"
            ],
            "Intérieur": [
                "Climatisation manuelle", "Climatisation automatique bi-zone", "Sièges chauffants",
                "Sièges en cuir", "Volant multifonction", "Volant chauffant", "Accoudoir central",
                "Vitres électriques avant", "Vitres électriques arrière", "Rétroviseurs électriques",
                "Écran tactile", "GPS", "Bluetooth", "Apple CarPlay", "Android Auto",
                "Prise USB", "Prise 12V", "Toit ouvrant panoramique", "Instrumentation numérique",
                "Éclairage d'ambiance", "Sellerie tissu", "Sellerie semi-cuir", "Sièges sport"
            ],
            "Extérieur": [
                "Jantes alliage", "Peinture métallisée", "Phares antibrouillard", "Barres de toit",
                "Attelage", "Vitres teintées", "Rétroviseurs rabattables électriquement",
                "Capteur de pluie", "Capteur de luminosité", "Hayon électrique", "Phares Xénon",
                "Toit ouvrant", "Becquet arrière", "Échappement sport"
            ],
            "Confort": [
                "Démarrage sans clé", "Accès mains libres", "Aide au démarrage en côte",
                "Frein de parking électrique", "Direction assistée", "Verrouillage centralisé à distance",
                "Régulateur de vitesse", "Limiteur de vitesse", "Aide au stationnement", "Sièges réglables en hauteur"
            ],
            "Autres": [
                "Carnet d'entretien","Suivis kilométrique inclus", "Double des clés", "Non-fumeur", "Garantie constructeur",
                "Roue de secours", "Kit de réparation pneus", "Pack sport", "Suspension sport"
            ]
        };

        const vehicleMaintenanceData = [
            "Kit distribution + pompe à eau",
            "Vidange moteur + filtre à huile",
            "Disques et plaquettes de frein",
            "Pneumatiques",
            "Contrôle technique OK",
            "Révision complète",
            "Climatisation rechargée",
            "Amortisseurs avant",
            "Amortisseurs arrière",
            "Batterie neuve",
            "Bougies d'allumage",
            "Filtre à air",
            "Filtre à carburant",
            "Filtre d'habitacle",
            "Embrayage"
        ];

        // Get elements
        const marqueSelect = document.getElementById('marque');
        const modeleSelect = document.getElementById('modele');
        const carburantSelect = document.getElementById('carburant');
        const boiteVitesseSelect = document.getElementById('boiteVitesse');
        const critAirSelect = document.getElementById('critAir');
        const optionsCheckboxesDiv = document.getElementById('optionsCheckboxes');
        const maintenancesCheckboxesDiv = document.getElementById('maintenancesCheckboxes');
        const generateAdButton = document.getElementById('generateAdButton');
        const adOutput = document.getElementById('adOutput');
        const copyAdButton = document.getElementById('copyAdButton');
        const copyMessage = document.getElementById('copyMessage');
        const manualOptionInput = document.getElementById('manualOptionInput'); // New
        const addManualOptionButton = document.getElementById('addManualOptionButton'); // New

        // Populate dropdowns and checkboxes
        function populateMarques() {
            for (const marque in carData) {
                const option = document.createElement('option');
                option.value = marque;
                option.textContent = marque;
                marqueSelect.appendChild(option);
            }
        }

        function populateModeles(selectedMarque) {
            modeleSelect.innerHTML = '<option value="">Sélectionner un modèle</option>';
            if (selectedMarque && carData[selectedMarque]) {
                carData[selectedMarque].forEach(modele => {
                    const option = document.createElement('option');
                    option.value = modele;
                    option.textContent = modele;
                    modeleSelect.appendChild(option);
                });
            }
        }

        function populateCritAir() {
            critAirOptions.forEach(critair => {
                const option = document.createElement('option');
                option.value = critair;
                option.textContent = critair;
                critAirSelect.appendChild(option);
            });
        }

        function generateOptionsCheckboxes() {
            optionsCheckboxesDiv.innerHTML = '';
            for (const category in vehicleOptionsData) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'col-span-1';
                categoryDiv.innerHTML = `<h5 class="font-semibold text-gray-700 mb-2">${category}</h5>`;
                
                vehicleOptionsData[category].forEach(optionText => {
                    const checkboxId = `option-${optionText.replace(/\s+/g, '-').toLowerCase()}`;
                    const checkboxDiv = document.createElement('div');
                    checkboxDiv.className = 'flex items-center mb-1';
                    checkboxDiv.innerHTML = `
                        <input type="checkbox" id="${checkboxId}" name="vehicle-option" value="${optionText}" class="h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded">
                        <label for="${checkboxId}" class="ml-2 text-gray-700 text-sm">${optionText}</label>
                    `;
                    categoryDiv.appendChild(checkboxDiv);
                });
                optionsCheckboxesDiv.appendChild(categoryDiv);
            }
        }

        function addManualOption() {
            const newOptionText = manualOptionInput.value.trim();
            if (newOptionText) {
                // Add to a new "Manuel" category or an existing "Autres"
                const category = "Autres"; // Or create a new category like "Manuel"
                if (!vehicleOptionsData[category]) {
                    vehicleOptionsData[category] = [];
                }
                // Check if option already exists to avoid duplicates
                if (!vehicleOptionsData[category].includes(newOptionText)) {
                    vehicleOptionsData[category].push(newOptionText);
                    generateOptionsCheckboxes(); // Regenerate all checkboxes to include the new option
                    // Find and check the newly added option
                    const newCheckbox = document.getElementById(`option-${newOptionText.replace(/\s+/g, '-').toLowerCase()}`);
                    if (newCheckbox) {
                        newCheckbox.checked = true;
                    }
                }
                manualOptionInput.value = ''; // Clear input
            }
        }

        function generateMaintenancesCheckboxes() {
            maintenancesCheckboxesDiv.innerHTML = '';
            vehicleMaintenanceData.forEach(maintText => {
                const checkboxId = `maint-${maintText.replace(/\s+/g, '-').replace(/[^\w-]/g, '').toLowerCase()}`;
                const checkboxDiv = document.createElement('div');
                checkboxDiv.className = 'flex items-center mb-1';
                checkboxDiv.innerHTML = `
                    <input type="checkbox" id="${checkboxId}" name="vehicle-maintenance" value="${maintText}" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                    <label for="${checkboxId}" class="ml-2 text-gray-700 text-sm">${maintText}</label>
                `;
                maintenancesCheckboxesDiv.appendChild(checkboxDiv);
            });
        }

        // Event Listeners
        marqueSelect.addEventListener('change', (event) => {
            populateModeles(event.target.value);
        });

        generateAdButton.addEventListener('click', generateAd);
        copyAdButton.addEventListener('click', copyAd);
        addManualOptionButton.addEventListener('click', addManualOption); // New event listener for manual option
        manualOptionInput.addEventListener('keypress', (event) => { // Allow adding by pressing Enter
            if (event.key === 'Enter') {
                event.preventDefault(); // Prevent form submission
                addManualOption();
            }
        });

        // Initial population on load
        document.addEventListener('DOMContentLoaded', () => {
            populateMarques();
            populateCarburants();
            populateBoiteVitesse();
            populateCritAir();
            generateOptionsCheckboxes();
            generateMaintenancesCheckboxes();
        });

        function generateAd() {
            const titre = document.getElementById('titre').value;
            const marque = marqueSelect.value;
            const modele = modeleSelect.value;
            const dateCirculation = document.getElementById('dateCirculation').value;
            const kilometrage = document.getElementById('kilometrage').value;
            const carburant = carburantSelect.value;
            const boiteVitesse = boiteVitesseSelect.value;
            const critAir = critAirSelect.value;
            const prix = document.getElementById('prix').value;
            const description = document.getElementById('description').value;
            const equivalent = document.getElementById('equivalent').value;

            const selectedOptions = Array.from(document.querySelectorAll('input[name="vehicle-option"]:checked'))
                                        .map(checkbox => checkbox.value);
            const selectedMaintenances = Array.from(document.querySelectorAll('input[name="vehicle-maintenance"]:checked'))
                                                .map(checkbox => checkbox.value);

            let adText = `${titre}\n\n`;
            
            adText = `🟥🟦 CENTRAL CARS 🟥🟦`;
            adText += `🚘 Marque: ${marque}\n`;
            adText += `🚙 Modèle: ${modele}\n`;
            adText += `📅 Date 1ère mise en circulation: ${dateCirculation}\n`;
            adText += `🛣 Kilométrage: ${kilometrage} km\n`;
            adText += `⛽ Carburant: ${carburant}\n`;
            adText += `🕹 Boîte de vitesse: ${boiteVitesse}\n`;
            if (critAir) adText += `🍃Crit'Air: ${critAir}\n`;
            
           
            if (description) {
                adText += `💬 Description: ${description}\n\n`;
            }

            if (selectedOptions.length > 0) {
                adText += `⚙️ Équipements & Options:\n`;
                selectedOptions.forEach(option => {
                    adText += `✅ ${option}\n`;
                });
                adText += `\n`;
            }

            if (selectedMaintenances.length > 0) {
                adText += `🛠️ Entretiens effectués:\n`;
                selectedMaintenances.forEach(maint => {
                    adText += `   - ${maint}\n`;
                });
                adText += `\n`;
            }

            // Price line with money emoji
            adText += `💵 Prix: ${prix} €\n\n`;
            adText += `💰 Tarif hors carte grise.\n\n`;
            adText += `🧑🏼‍🔧 Garantie moteur et boîte 6 mois (extension de garantie possible).\n\n`;
            adText += `🇫🇷🇫🇷HABILITÉE SERVICE CARTE GRISE 🇫🇷🇫🇷\n`;
            adText += `Habilité par le Agence Nationale des Titres Sécurisés.\n`;
            adText += `Nous nous occupons de toutes les démarches administratives d'immatriculation !\n\n`;
            adText += `📄 Pour faciliter les démarches administratives pensez a vous munir des pièces suivantes lors de votre visite : \n`;
            adText += `🔸Pièce d'identité en cours de validité.\n`;
            adText += `🔸Permis de conduire en cours de validité.\n`;
            adText += `🔸Justificatif de domicile moins de 3 mois (facture ou avis d'imposition).\n`;
            adText += `🔸En cas d'hébergement : une attestation d'hébergement et la copie de la carte d'identité de l'hébergeur.\n\n`;

            adText += `🟥🟦 CENTRAL CARS 🟥🟦\n\n`;
            adText += `📫576 Rue Marcel Sembat \n`;
            adText += `     59690 Vieux-condé\n\n`;

            adText += `⏰HORAIRES D'OUVERTURE⏰\n`;
            adText += `- Du lundi au vendredi : 09H00-12H00 / 14H00-17h30\n`;
            adText += `- SAMEDI : 9h30 -12h 14h30 - 17H00\n\n`;

            adText += `⚠ Merci de prendre rendez-vous par téléphone avant votre venue afin de mieux pouvoir vous accueillir et de vous assurez de la disponibilité du véhicule ⚠\n\n`;

            if (equivalent) {
                adText += `Equivalent : ${equivalent}\n\n`;
            }

            adText += `*sous réserve d’erreurs lors de l’édition des annonce.`;

            adOutput.value = adText;
            autoResizeTextarea();
        }

        function copyAd() {
            adOutput.select();
            document.execCommand('copy');
            copyMessage.classList.remove('hidden');
            copyMessage.classList.add('show');
            setTimeout(() => {
                copyMessage.classList.remove('show');
                copyMessage.classList.add('hidden');
            }, 3000);
        }

        function autoResizeTextarea() {
            adOutput.style.height = 'auto';
            adOutput.style.height = adOutput.scrollHeight + 'px';
        }
    </script>
</body>
</html>
